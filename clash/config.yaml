mixed-port: 7890
socks-port: 7891
redir-port: 7892
allow-lan: false
bind-address: "*"
ipv6: false
mode: rule
log-level: info
external-controller: "127.0.0.1:9090"
secret: ""
#dns:
#  enable: false
#  listen: 0.0.0.0:53
#  ipv6: false
#  default-nameserver:
#    - 1.2.4.8
#    - 223.5.5.5
#    - 119.29.29.29
#  nameserver:
#    - 1.2.4.8
#    - 119.29.29.29
#    - 223.5.5.5
#    - tls://dns.rubyfish.cn:853
#  fallback:
#    - 223.5.5.5
#    - tls://1.0.0.1:853
#    - tls://dns.google:853
# Will be ignored after profile selection
proxies:
  - name: "socks"
    type: socks5
    server: 127.0.0.1
    port: 1080

  - name: "http"
    type: http
    server: 127.0.0.1
    port: 1080

  - name: "ss"
    type: ss
    server: xxx.xxx.com
    port: 222
    cipher: chacha20-ietf-poly1305
    password: "password"
    udp: true

  - name: "ssr"
    type: ssr
    server: xxx.xxx.com
    port: 3396
    cipher: chacha20-ietf
    password: "password"
    obfs: tls1.2_ticket_auth
    protocol: auth_sha1_v4
    obfs-param: download.microsoft.com
    protocol-param: "31057:8wPxj2"
    udp: true

  - name: "vmess"
    type: vmess
    server: xxx.xxx.com
    port: 443
    uuid: 998272ec-6486-43ab-a450-86e6964be97f
    alterId: 0
    cipher: auto
    tls: true
    udp: true
    servername: xxx.xxx.com
    skip-cert-verify: true
    network: ws
    ws-opts:
      path: /apps
      headers:
        Host: xxx.xxx.com
      max-early-data: 4096
      early-data-header-name: Sec-WebSocket-Protocol

  - name: "trojan"
    type: trojan
    server: xxx.xxx.com
    port: 443
    password: password
    sni: xxx.xxx.com
    alpn:
      - h2
      - http/1.1
    skip-cert-verify: true

  - name: "snell"
    type: snell
    server: xxx.xxx.com
    port: 9443
    psk: password
    #version: 2
    obfs-opts:
      mode: http # or http
      host: xxx.xxx.com

  - name: trojan-grpc
    server: xxx.xxx.com
    port: 443
    type: trojan
    password: password
    network: grpc
    alpn:
      - h2
      - http/1.1
    sni: tycng.com
    skip-cert-verify: true
    #udp: true
    grpc-opts:
      grpc-service-name: "trojan"

  - name: vmess-grpc
    server: xxx.xxx.com
    port: 443
    type: vmess
    uuid: d9e5d918-91f8-49ee-94a3-faswerqwe
    alterId: 0
    cipher: auto
    network: grpc
    tls: true
    servername: xxx.xxx.com
    skip-cert-verify: true
    grpc-opts:
      grpc-service-name: "sbwhgrpc"

  - name: "vmess-http"
    type: vmess
    server: xxx.xxx.com
    port: 20002
    uuid: 3785ed4b-ccf2-843f-c605-gafwqae
    alterId: 0
    cipher: auto
    network: http
    http-opts:
      method: "GET"
      path:
        - "/"
      headers:
        Host:
          - www.bing.com
          - www.cloudflare.com
          - www.amazon.com
        User-Agent:
          - Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,
            like Gecko) Chrome/84.0.4147.105 Safari/537.36 Edg/84.0.522.49
          - Mozilla/5.0 (iPhone; CPU iPhone OS 13_6 like Mac OS X)
            AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/84.0.4147.71
            Mobile/15E148 Safari/604.1
        Accept-Encoding:
          - gzip, deflate
        Connection:
          - keep-alive
    skip-cert-verify: false

  - name: trojan-ws
    server: xxx.xxx.com
    port: 443
    type: trojan
    password: password
    network: ws
    sni: xxx.xxx.com
    skip-cert-verify: true
    udp: true
    ws-opts:
      path: /
      headers:
        Host: xxx.xxx.com

proxy-groups:
  - name: ✈️ 墙外网站
    type: select
    proxies:
      - "负载均衡"
      #- ♻️ 自动选择
      - "socks"
      - "http"
      - "ss"
      - "ssr"
      - "trojan-ws"
      - "vmess"
      - "trojan"
      - "snell"
      - "vmess-http"
      - "vmess-grpc"
      - "trojan-grpc"
      - DIRECT
  - name: 🐟 其他网站
    type: select
    proxies:
      - DIRECT
      - ✈️ 墙外网站
  - name: 🎥 NETFLIX
    type: select
    proxies:
      - "socks"
      - "http"
      - "ss"
      - "ssr"
      - "vmess"
      - "trojan"
      - "snell"
      - "vmess-http"
      - "vmess-grpc"
      - "trojan-grpc"
      - DIRECT
  - name: 🚫 以下不用动
    type: select
    proxies:
      - DIRECT
  - name: 🛑 广告拦截
    type: select
    proxies:
      - REJECT
      - DIRECT
  - name: Ⓜ️ 微软苹果
    type: select
    proxies:
      - DIRECT
      - ✈️ 墙外网站
  - name: 🌍 国外媒体
    type: select
    proxies:
      - ✈️ 墙外网站
      - DIRECT
  #- name: ♻️ 自动选择
  #  type: url-test
  #  url: http://www.gstatic.com/generate_204
  #  interval: 500
  #  proxies:
  #    - "socks"
  #    - "http"
  #    - "ss"
  #    - "ssr"
  #    - "vmess"
  #    - "trojan"
  #    - "snell"
  - name: "负载均衡"
    type: load-balance
    proxies:
      - "socks"
      - "http"
      - "ss"
      - "ssr"
      - "vmess"
      - "trojan"
      - "snell"
    url: "http://www.gstatic.com/generate_204"
    interval: 500
rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/reject.txt"
    path: ./profiles/rules/reject.yaml
    interval: 3600

  rejectcidr:
    type: http
    behavior: ipcidr
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/rejectcidr.txt"
    path: ./profiles/rules/rejectcidr.yaml
    interval: 3600

  icloud:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/icloudcn.txt"
    path: ./profiles/rules/icloudcn.yaml
    interval: 3600

  apple:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/applecn.txt"
    path: ./profiles/rules/applecn.yaml
    interval: 3600

  win-spy:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/win-spy.txt"
    path: ./profiles/rules/win-spy.yaml
    interval: 3600

  win-update:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/win-update.txt"
    path: ./profiles/rules/win-update.yaml
    interval: 3600

  win-extra:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/win-extra.txt"
    path: ./profiles/rules/win-extra.yaml
    interval: 3600

  google:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/google.txt"
    path: ./profiles/rules/google.yaml
    interval: 3600

  proxy:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/proxy.txt"
    path: ./profiles/rules/proxy.yaml
    interval: 3600

  direct:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/direct.txt"
    path: ./profiles/rules/direct.yaml
    interval: 3600

  private:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/private.txt"
    path: ./profiles/rules/private.yaml
    interval: 3600

  gfw:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/gfw.txt"
    path: ./profiles/rules/gfw.yaml
    interval: 3600

  tld-not-cn:
    type: http
    behavior: domain
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/tld-not-cn.txt"
    path: ./profiles/rules/tld-not-cn.yaml
    interval: 3600

  Foreignmedia:
    type: http
    behavior: classical
    url: https://gio.tycng.com/v2ray/clash/Ruleset/Foreignmedia.txt
    interval: 3600
    path: ./profiles/rules/Foreignmedia.yaml

  Netflix:
    type: http
    behavior: classical
    url: https://gio.tycng.com/v2ray/clash/Ruleset/Netflix.txt
    interval: 3600
    path: ./profiles/rules/Netflix.yaml

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/telegramcidr.txt"
    path: ./profiles/rules/telegramcidr.yaml
    interval: 3600

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/cncidr.txt"
    path: ./profiles/rules/cncidr.yaml
    interval: 3600

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/lancidr.txt"
    path: ./profiles/rules/lancidr.yaml
    interval: 3600

  applications:
    type: http
    behavior: classical
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/applications.txt"
    path: ./profiles/rules/applications.yaml
    interval: 3600

  domain-ip-cird:
    type: http
    behavior: classical
    url: "https://gio.tycng.com/v2ray/clash/Ruleset/domain-ip-cidr.txt"
    path: ./profiles/rules/domain-ip-cidr.yaml
    interval: 3600

# 规则
rules:
  - RULE-SET,applications,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,reject,🛑 广告拦截
  - RULE-SET,rejectcidr,🛑 广告拦截
  - RULE-SET,icloud,Ⓜ️ 微软苹果
  - RULE-SET,apple,Ⓜ️ 微软苹果
  - RULE-SET,win-spy,Ⓜ️ 微软苹果
  - RULE-SET,win-update,Ⓜ️ 微软苹果
  - RULE-SET,win-extra,Ⓜ️ 微软苹果
  - RULE-SET,google,DIRECT
  - RULE-SET,Foreignmedia,🌍 国外媒体
  - RULE-SET,Netflix,🎥 NETFLIX
  - RULE-SET,proxy,✈️ 墙外网站
  - RULE-SET,gfw,✈️ 墙外网站
  - RULE-SET,tld-not-cn,✈️ 墙外网站
  - RULE-SET,domain-ip-cird,✈️ 墙外网站
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - RULE-SET,telegramcidr,✈️ 墙外网站
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,🐟 其他网站
